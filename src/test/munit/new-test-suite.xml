<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns:wiremock="http://www.mulesoft.org/schema/mule/wiremock"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:munit="http://www.mulesoft.org/schema/mule/munit"
	xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/wiremock http://www.mulesoft.org/schema/mule/wiremock/current/mule-wiremock.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd">
	<munit:config name="new-test-suite.xml" />
	<wiremock:config name="Wiremock_Config1" doc:name="Wiremock Config"
		doc:id="4a8e8f52-b2b4-4587-9179-a7f039d266cb" />
	<munit:before-suite name="new-test-suiteBefore_Suite" doc:id="adcad33c-3ceb-4fbf-967c-de62dfad0fd3">
		<wiremock:start-server doc:name="Start" doc:id="83243d0c-8e6b-4194-b466-65d547134bb1"
			config-ref="Wiremock_Config1" />
	</munit:before-suite>
	<munit:test name="new-test-suiteTest" doc:id="ec6d1e67-7f72-4108-9547-baa6408483d2">
		<munit:enable-flow-sources>
			<munit:enable-flow-source value="wiremock-testsFlow" />
		</munit:enable-flow-sources>
		<munit:execution>
			<logger level="INFO" doc:name="Logger" doc:id="388206e2-7019-413a-94db-f6eee59851ee" message="${url}" />
			<wiremock:add-stub doc:name="no content" doc:id="b7168de1-6216-417e-ae0d-4ca4b5c31723"
				jsonMapping='#[%dw 2.0
output application/json
---
{
	"request" : {
		"method" : "GET",
		"url" : "/generate_204"
	},
	"response" : {
		"status" : 204,
		"statusMessage": "No Content"
	}
}]'
				config-ref="Wiremock_Config1" />
			<http:request method="GET" doc:name="Request" doc:id="b6c6dc58-7fbb-4c6f-9825-74fae2bd804c"
				url="http://localhost:8081/" />
			<logger level="INFO" doc:name="Logger" doc:id="c7ae4a7f-0f93-47f5-b305-fed16d4cade9"
				message="#[payload]" />
		</munit:execution>
		<munit:validation>
			<munit-tools:assert-equals doc:name="Assert equals" doc:id="8f845151-97b2-4686-844d-13b5af5db25b"
				actual="#[payload]" expected="NO CONTENT" />
			<wiremock:verify-request doc:name="Verify" doc:id="6c1f8a40-3963-4b24-88c3-45d74714450d"
				config-ref="Wiremock_Config1" comparison="EQUAL" times="1"
				jsonMapping='#[%dw 2.0
output application/json
---
{
	"method" : "GET",
	"url" : "/generate_204"
}]' />
		</munit:validation>
	</munit:test>
	<munit:after-suite name="new-test-suiteAfter_Suite" doc:id="76997daa-f587-4dfe-bbdc-9edd73e0e9d8">
		<wiremock:stop-server doc:name="Stop" doc:id="bdf94fa9-5cb7-41d0-89e4-8e798c860d5e"
			config-ref="Wiremock_Config1" />
	</munit:after-suite>

</mule>
